window.UnityBox=window.UnityBox||function(r){"use strict";var e=function(r,e){return r.replace(/#\{([^\{\}]+)\}/g,function(r,t){return e[t]})},t=function(r,e,t){this.url=r,/\/$/.test(this.url)&&(this.url=this.url.substring(0,this.url.length-1)),this.selector=e,this.styles=t,this.bind()};t.prototype={trace_url:"#{base_url}/#{trace_method}/#{serial_number}/",qrcode_url:"#{base_url}/#{qrcode_method}/#{serial_number}/",info_id:"__unitybox_layer",duration:1e3,bind:function(){var t=r(this.selector);r(e("<div id='#{id}'></div>",{id:this.info_id})).css({width:"100%",height:"100%",overflow:"auto","text-align":"center","margin-top":"2px"}).html("<p>No parcel specified</p>").appendTo(t);var i=function(r){return function(){r.showParcel()}}(this);r("<iframe src='about:blank' frameborder='0'></iframe>").css({width:"100%",height:"100%",overflow:"auto"}).hide().appendTo(t).load(i),this.info("No parcel specified.")},trace_parcel:function(r){if("string"!=typeof r)return void this.error("Invalid serial number!");if(!/\d{12}/.test(r.replace(/^\s*|\s$/g,"")))return void this.error("Invalid serial number!");var t=e(this.trace_url,{base_url:this.url,trace_method:"parcel/trace",serial_number:r});this.info("Searching parcel..."),this.content_layer().attr("src",t)},qrcode_parcel:function(r){if("string"!=typeof r)return void this.error("Invalid serial number!");if(!/\d{12}/.test(r.replace(/^\s*|\s$/g,"")))return void this.error("Invalid serial number!");var t=e(this.qrcode_url,{base_url:this.url,qrcode_method:"parcel/qrcode",serial_number:r});this.info("Searching parcel..."),this.content_layer().attr("src",t)},build_template:function(r){return r.prefix?void(this.trace_url=r.prefix+"#{serial_number}"):void(this.trace_url="#{base_url}/#{trace_method}/#{serial_number}/")},info:function(e){this.content_layer().hide();var t=this.msg_layer();t.empty(),r("<p></p>").html(e).css({border:"1px solid transparent",color:"#468847","background-color":"#dff0d8","border-color":"#d6e9c6",margin:"2px",padding:"5px"}).appendTo(t),t.show()},error:function(e){this.content_layer().hide();var t=this.msg_layer();t.empty(),r("<p></p>").html(e).css({border:"1px solid transparent",color:"#b94a48","background-color":"#f2dede","border-color":"#eed3d7",margin:"2px",padding:"5px"}).appendTo(t),t.show()},showParcel:function(){this.content_layer().show(),this.msg_layer().hide()},content_layer:function(){return r(this.selector+" iframe")},msg_layer:function(){return r(this.selector+e(" ##{id}",{id:this.info_id}))}};var i={api_base:"https://api.unity-box.com/services",styles:""},n={};return n.box=function(r){for(var e in i)e in r||(r[e]=i[e]);var n=new t(r.api_base,r.selector,r.styles);return n.build_template(r),n},n}(window.jQuery);